2016/Jan/16 2nd INLINE=20 itof/ftoi/floorはライブラリ実装 fsubはハードウェア実装 後は1stとなるべく同じ実装にしたはず。
===Statistics===
nop   : 0
add   : 399695714
addi  : 849904610
addiu : 38309813
sub   : 179716
slli  : 2545292
srai  : 2
beq   : 276079653
bneq  : 230
blt   : 791
ble   : 2874784
jr    : 119668894
jal   : 9807689
lw    : 927366652
sw    : 373621680
send  : 154909
recv  : 1137
halt  : 1
fmov  : 10278798
fadd  : 60203675
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 2394971
fabs  : 25985673
ftoi  : 0
itof  : 0
floor : 0
fbeq  : 11190249
fbneq : 0
fblt  : 273935
fble  : 50354240
flw   : 356478644
fsw   : 78122605
---total : 3773033668---

2016/Jan/16 INLINE=20 itof/ftoi/floorもハードウェア実装にした。
===Statistics===
nop   : 0
add   : 399670724
addi  : 848490914
addiu : 38145017
sub   : 122308
slli  : 2462894
srai  : 2
beq   : 275745110
bneq  : 230
blt   : 791
ble   : 2841538
jr    : 119414105
jal   : 9552900
lw    : 927062711
sw    : 373350268
send  : 154909
recv  : 1137
halt  : 1
fmov  : 9804787
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 2053379
fabs  : 25985673
ftoi  : 49152
itof  : 16623
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 355829204
fsw   : 78073453
---total : 3767088125---

2016/Feb/09 FToI/IToF/Floorの変換をemit.mlじゃなくてvirtual.mlでするようにした。何故か命令数が減った。もしかすると、regAlloc.mlで型の合っているレジスタしか使用しないようにしたことが何かしらの最適化を産んだ??
===Statistics===
nop   : 0
add   : 399670724
addi  : 848491074
addiu : 38145017
sub   : 122308
slli  : 2462894
srai  : 2
beq   : 275745110
bneq  : 230
blt   : 791
ble   : 2841538
jr    : 119414105
jal   : 9552900
lw    : 862146904
sw    : 336670567
send  : 154909
recv  : 1137
halt  : 1
fmov  : 9804615
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 2053379
fabs  : 25985673
ftoi  : 49152
itof  : 16623
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 316984567
fsw   : 35115040
---total : 3583689555---

2016/Feb/10 FToI/IToF/Floorについて即値最適化してみた。変化なし。
===Statistics===
nop   : 0
add   : 399670724
addi  : 848491074
addiu : 38145017
sub   : 122308
slli  : 2462894
srai  : 2
beq   : 275745110
bneq  : 230
blt   : 791
ble   : 2841538
jr    : 119414105
jal   : 9552900
lw    : 862146904
sw    : 336670567
send  : 154909
recv  : 1137
halt  : 1
fmov  : 9804615
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 2053379
fabs  : 25985673
ftoi  : 49152
itof  : 16623
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 316984567
fsw   : 35115040
---total : 3583689555---

2016/Feb/10 INLINE=100にしてみた。この後戻した。min-rt.oは109KB
===Statistics===
nop   : 0
add   : 399670724
addi  : 719120444
addiu : 24819356
sub   : 122308
slli  : 2462894
srai  : 0
beq   : 305290599
bneq  : 230
blt   : 791
ble   : 2813470
jr    : 62156734
jal   : 2365358
lw    : 708417483
sw    : 273981014
send  : 154909
recv  : 1137
halt  : 1
fmov  : 6391461
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 2053379
fabs  : 25985673
ftoi  : 49152
itof  : 16621
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 308550196
fsw   : 28404816
---total : 3171089045---

2016/Feb/10 emit.mlでゼロレジスタ周りの細かい最適化をした。
===Statistics===
nop   : 0
add   : 399670724
addi  : 848491074
addiu : 38145017
sub   : 122308
slli  : 2462894
srai  : 2
beq   : 275745110
bneq  : 230
blt   : 791
ble   : 2841538
jr    : 119414105
jal   : 9552900
lw    : 862146904
sw    : 336670567
send  : 154909
recv  : 1137
halt  : 1
fmov  : 9804615
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 2053379
fabs  : 25985673
ftoi  : 49152
itof  : 16623
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 316984567
fsw   : 35115040
---total : 3583689555---

2016/Feb/11 浮動小数点数変数の定数畳み込みがコメントアウトしてあったので復活させてみたが、変わらなかった。
===Statistics===
nop   : 0
add   : 399670724
addi  : 848491074
addiu : 38145017
sub   : 122308
slli  : 2462894
srai  : 2
beq   : 275745110
bneq  : 230
blt   : 791
ble   : 2841538
jr    : 119414105
jal   : 9552900
lw    : 862146904
sw    : 336670567
send  : 154909
recv  : 1137
halt  : 1
fmov  : 9804615
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 2053379
fabs  : 25985673
ftoi  : 49152
itof  : 16623
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 316984567
fsw   : 35115040
---total : 3583689555---

2016/Feb/11 自明な自由変数を含む関数の自由変数を消すようにしたが、変わらなかった
===Statistics===
nop   : 0
add   : 399670724
addi  : 848491074
addiu : 38145017
sub   : 122308
slli  : 2462894
srai  : 2
beq   : 275745110
bneq  : 230
blt   : 791
ble   : 2841538
jr    : 119414105
jal   : 9552900
lw    : 862146904
sw    : 336670567
send  : 154909
recv  : 1137
halt  : 1
fmov  : 9804615
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 2053379
fabs  : 25985673
ftoi  : 49152
itof  : 16623
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 316984567
fsw   : 35115040
---total : 3583689555---

2016/Feb/11 Tailでない小さいif文を展開するようにしたら1億ちょっと減った。NONTAILIF = 50, min-rt.oは45KB
===Statistics===
nop   : 0
add   : 399670724
addi  : 810823123
addiu : 38145017
sub   : 122308
slli  : 2462894
srai  : 2
beq   : 202894478
bneq  : 230
blt   : 791
ble   : 2841538
jr    : 119389409
jal   : 9552900
lw    : 860288179
sw    : 334868070
send  : 154909
recv  : 1137
halt  : 1
fmov  : 9804615
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 1930588
fabs  : 25985673
ftoi  : 49152
itof  : 16623
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 316983599
fsw   : 35113104
---total : 3469359359---

2016/Feb/11 NONTAILIF=75: 50に比べてbeqが0.2億、addiが0.1億程度減った min-rt.oは51KB
===Statistics===
nop   : 0
add   : 399670724
addi  : 797014146
addiu : 38145017
sub   : 122308
slli  : 2462894
srai  : 2
beq   : 175201487
bneq  : 230
blt   : 791
ble   : 2841538
jr    : 119389409
jal   : 9552900
lw    : 860283071
sw    : 334868070
send  : 154909
recv  : 1137
halt  : 1
fmov  : 9804615
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 1930588
fabs  : 25985673
ftoi  : 49152
itof  : 16623
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 316983599
fsw   : 35113104
---total : 3427852283---

2016/Feb/11 NONTAILIF=100: beqとaddiが減った。全体としてNONTAILIF=75のときと比べ0.2億減。min-rt.oは54KB
===Statistics===
nop   : 0
add   : 399670724
addi  : 789626552
addiu : 38145017
sub   : 122308
slli  : 2462894
srai  : 2
beq   : 164562549
bneq  : 230
blt   : 791
ble   : 2841538
jr    : 119389409
jal   : 9552900
lw    : 860283071
sw    : 334868070
send  : 154909
recv  : 1137
halt  : 1
fmov  : 9804615
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 1930588
fabs  : 25985673
ftoi  : 49152
itof  : 16623
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 316983599
fsw   : 35113104
---total : 3409825751---

2016/Feb/11 NONTAILIF=100, INLINE=50, min-rt.oは123KB
===Statistics===
nop   : 0
add   : 399670724
addi  : 720476593
addiu : 34571627
sub   : 122308
slli  : 2462894
srai  : 2
beq   : 191313526
bneq  : 230
blt   : 791
ble   : 2804038
jr    : 85745545
jal   : 6081806
lw    : 764518050
sw    : 307082600
send  : 154909
recv  : 1137
halt  : 1
fmov  : 12255207
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 1930588
fabs  : 25985673
ftoi  : 49152
itof  : 16623
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 316785406
fsw   : 34911321
---total : 3205201046---

2016/Feb/12 NONTAILIF=20, INLINE=90
===Statistics===
nop   : 0
add   : 399670724
addi  : 701089596
addiu : 24963184
sub   : 122308
slli  : 2462894
srai  : 0
beq   : 265958393
bneq  : 230
blt   : 791
ble   : 2801745
jr    : 62496750
jal   : 3381256
lw    : 700733214
sw    : 267752309
send  : 154909
recv  : 1137
halt  : 1
fmov  : 7043366
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 1930588
fabs  : 25985673
ftoi  : 49152
itof  : 16621
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 310725823
fsw   : 28557141
---total : 3104158100---

2016/Feb/23 peepholeした。addiによる即値代入で無駄な所を削った。NONTAILIF=20, INLINE=90において、0.3億の削減。
===Statistics===
nop   : 0
add   : 399670724
addi  : 672255595
addiu : 24963184
sub   : 122308
slli  : 2462894
srai  : 0
beq   : 265958393
bneq  : 230
blt   : 791
ble   : 2801745
jr    : 62496750
jal   : 3381256
lw    : 700102652
sw    : 267752309
send  : 154909
recv  : 1137
halt  : 1
fmov  : 7043366
fadd  : 59663889
fsub  : 54543851
fmul  : 119280561
finv  : 1517574
fsqrt : 2197325
fneg  : 1930588
fabs  : 25985673
ftoi  : 49152
itof  : 16621
floor : 189014
fbeq  : 11190249
fbneq : 0
fblt  : 35769
fble  : 49642063
flw   : 310725823
fsw   : 28557141
---total : 3074693537---
